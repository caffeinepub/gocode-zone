{
  "kind": "build_request",
  "title": "Fix admin redirect after login not working",
  "projectName": "GoCode Zone",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-26",
      "text": "Debug and fix the authentication flow in LoginButton.tsx to ensure that when an admin user successfully logs in via Internet Identity, they are redirected to /admin instead of remaining on the current page or being redirected to home",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-no"
        ],
        "quotes": [
          "no"
        ]
      },
      "acceptanceCriteria": [
        "After clicking Login and completing Internet Identity authentication, an admin user is automatically redirected to the /admin route",
        "Non-admin users continue to remain on their current page after login",
        "The redirect happens immediately after successful authentication without requiring additional clicks",
        "The admin status check from the backend is properly awaited before determining the redirect destination"
      ]
    },
    {
      "id": "REQ-27",
      "text": "Verify that the useIsAdmin hook in LoginButton.tsx correctly fetches and returns the admin status after authentication is complete, and that the redirect logic waits for this check to finish before executing",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-no"
        ]
      },
      "acceptanceCriteria": [
        "The useIsAdmin query is enabled and executes immediately after successful login",
        "The redirect logic waits for the admin status query to return data before determining the destination",
        "No race conditions exist between authentication completion and admin status check"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend admin authorization logic",
    "Maintain the existing Internet Identity authentication flow",
    "Preserve the non-admin user experience (they should stay on current page after login)"
  ],
  "nonGoals": [
    "Changing the admin panel UI or functionality",
    "Modifying the backend API endpoints",
    "Adding new authentication methods"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}